<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/"/>
    <title>VICE and Voyant Tools</title>

    <meta name="generator" content="pandoc" />
        
    <link rel="stylesheet" href="/assets/templates/archive.css">

</head>
<body>

    <nav role="navigation">
        <ul class="nav-h">
            <li><a target="_self" href="/">Home</a></li>
	        <li><a target="_self" href="/notes/Journal.html">Journal</a></li>
	        <li><a target="_self" href="/notes/Notes.html">Notes</a></li>
	        <li><a target="_self" href="/notes/Glossary.html">Glossary</a></li>
        </ul>

    </nav>

    <main role="main">
        <h1 id="vice-and-voyant-tools">VICE and Voyant Tools</h1>
        <h2 id="section">2023-05-07</h2>
        <h3 id="basic-voyant-tools-setup">Basic Voyant Tools setup</h3>
        <ul>
        <li>If you work on a corpus and change the settings, remember to
        <a
        href="https://voyant-tools.org/docs/#!/guide/start-section-bookmarking-your-corpus">bookmark
        (export) your current state</a> in order to access it later
        again</li>
        <li>Running Voyant Tools locally isn’t strictly necessary, but
        it improved speed in my case
        <ul>
        <li>Setup Voyant Server <a
        href="https://voyant-tools.org/docs/#!/guide/server">according
        to the guide</a></li>
        <li>Run into problems on launching VoyantServer on macOS; had to
        give the Java Runtime Environment <strong><a
        href="https://discussions.apple.com/thread/254608797">Full Disk
        Access</a></strong> and start the server via <a
        href="https://brogramo.com/java-application-launch-failed-check-console-for-possible-error-message/">shell</a></li>
        </ul></li>
        <li>Copied all <code>.c</code> and all <code>.h</code> files
        from the <code>src</code> folder into a new Voyant project
        (ignore the import warning). This also means I flattened the
        hierarchy in which the files were organized. I believe this to
        be neglectable in the case of VICE</li>
        <li>Deactivate <a
        href="https://voyant-tools.org/docs/#!/guide/stopwords">stopwords</a>,
        since in code every word can have meaning and is not just
        syntactic glue</li>
        <li>Add <a
        href="https://voyant-tools.org/docs/#!/guide/categories">categories</a>
        and colour-coded them</li>
        </ul>
        <h3 id="stopwords-and-categories-for-c">Stopwords and categories
        for C</h3>
        <p>Here is a list of relevant stopwords generated by ChatGPT or
        Github Codepilot, provided by Moritz Mähr.</p>
        <ul>
        <li>Data Types
        <ul>
        <li>char , double , float , int , long , short , signed ,
        unsigned , void , _Bool</li>
        </ul></li>
        <li>Control Flow Keywords
        <ul>
        <li>break, continue, do, else, for, goto, if, return, switch,
        while</li>
        </ul></li>
        <li>Storage Class Keywords
        <ul>
        <li>auto, extern, register, static, typedef</li>
        </ul></li>
        <li>Type Qualifiers
        <ul>
        <li>const, restrict, volatile</li>
        </ul></li>
        <li>Other Keywords
        <ul>
        <li>_Alignas, _Alignof, _Atomic, _Complex, _Generic, _Imaginary,
        _Noreturn, _Static_assert, _Thread_local</li>
        </ul></li>
        </ul>
        <h3 id="to-look-into">To look into</h3>
        <ul>
        <li>Categories (Keywords, Comments etc.)</li>
        <li>Contexts word sequences: <a
        href="https://voyant-tools.org/docs/#!/guide/collocatesgraph">collocates
        graph</a> , <a
        href="https://voyant-tools.org/docs/#!/guide/corpuscollocates">corpus
        collocates</a> , <a
        href="https://voyant-tools.org/docs/#!/guide/contexts">contexts</a> , <a
        href="https://voyant-tools.org/docs/#!/guide/phrases">phrases</a> , <a
        href="https://voyant-tools.org/docs/#!/guide/wordtree">wordtree</a></li>
        <li><a
        href="https://voyant-tools.org/docs/#!/guide/topics">Topics</a> and <a
        href="https://voyant-tools.org/docs/#!/guide/trends">trends</a></li>
        </ul>
        <h3 id="first-thoughts">First thoughts</h3>
        <ul>
        <li>This is very messy…</li>
        </ul>
        <h2 id="section-1">2023-05-17</h2>
        <p>After a rather messy start with the complete corpus, I wanted
        to have a go at just the comments. I tried my luck with regex
        and search and replace, first in vscodium, then in a
        bash-onliner (with find and sed) to remove everything that is
        not a comment. Spent a few hours on this problem without much
        luck, mainly because vscodium couldn’t handle search and replace
        and several thousand files. I reverted to working with python
        and asked ChatGPT to produce me a script that solved my
        problem…</p>
        <p>My prompt
        “<code>I need a python script that goes through a folder with files, searches through them with a regex pattern and copies the matches into new files</code>”
        resulted in a proposition which I needed to tweak a bit to work
        as intended. That took me 20 minutes in the end.</p>
        <div class="sourceCode" id="cb1"><pre
        class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="/notes/VICE and Voyant Tools.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-2"><a href="/notes/VICE and Voyant Tools.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-3"><a href="/notes/VICE and Voyant Tools.html#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="/notes/VICE and Voyant Tools.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search_and_copy_files(folder_path, regex_pattern):</span>
<span id="cb1-5"><a href="/notes/VICE and Voyant Tools.html#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a regex pattern object</span></span>
<span id="cb1-6"><a href="/notes/VICE and Voyant Tools.html#cb1-6" aria-hidden="true" tabindex="-1"></a>    pattern <span class="op">=</span> re.<span class="bu">compile</span>(regex_pattern)</span>
<span id="cb1-7"><a href="/notes/VICE and Voyant Tools.html#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="/notes/VICE and Voyant Tools.html#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Iterate over files in the folder</span></span>
<span id="cb1-9"><a href="/notes/VICE and Voyant Tools.html#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> filename <span class="kw">in</span> os.listdir(folder_path):</span>
<span id="cb1-10"><a href="/notes/VICE and Voyant Tools.html#cb1-10" aria-hidden="true" tabindex="-1"></a>        file_path <span class="op">=</span> os.path.join(folder_path, filename)</span>
<span id="cb1-11"><a href="/notes/VICE and Voyant Tools.html#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="/notes/VICE and Voyant Tools.html#cb1-12" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if it&#39;s a file</span></span>
<span id="cb1-13"><a href="/notes/VICE and Voyant Tools.html#cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> os.path.isfile(file_path):</span>
<span id="cb1-14"><a href="/notes/VICE and Voyant Tools.html#cb1-14" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Open the file for reading</span></span>
<span id="cb1-15"><a href="/notes/VICE and Voyant Tools.html#cb1-15" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(file_path)</span>
<span id="cb1-16"><a href="/notes/VICE and Voyant Tools.html#cb1-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">with</span> <span class="bu">open</span>(file_path, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb1-17"><a href="/notes/VICE and Voyant Tools.html#cb1-17" aria-hidden="true" tabindex="-1"></a>                content <span class="op">=</span> <span class="bu">file</span>.read()</span>
<span id="cb1-18"><a href="/notes/VICE and Voyant Tools.html#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="/notes/VICE and Voyant Tools.html#cb1-19" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Search for matches using the regex pattern</span></span>
<span id="cb1-20"><a href="/notes/VICE and Voyant Tools.html#cb1-20" aria-hidden="true" tabindex="-1"></a>            matches <span class="op">=</span> re.findall(pattern, content)</span>
<span id="cb1-21"><a href="/notes/VICE and Voyant Tools.html#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="/notes/VICE and Voyant Tools.html#cb1-22" aria-hidden="true" tabindex="-1"></a>            <span class="co"># If there are matches, create a new file and copy the matching content</span></span>
<span id="cb1-23"><a href="/notes/VICE and Voyant Tools.html#cb1-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> matches:</span>
<span id="cb1-24"><a href="/notes/VICE and Voyant Tools.html#cb1-24" aria-hidden="true" tabindex="-1"></a>                new_filename <span class="op">=</span> <span class="ss">f&quot;matches_</span><span class="sc">{</span>filename<span class="sc">}</span><span class="ss">&quot;</span></span>
<span id="cb1-25"><a href="/notes/VICE and Voyant Tools.html#cb1-25" aria-hidden="true" tabindex="-1"></a>                new_file_path <span class="op">=</span> os.path.join(<span class="st">&#39;comments/&#39;</span>, new_filename)</span>
<span id="cb1-26"><a href="/notes/VICE and Voyant Tools.html#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="/notes/VICE and Voyant Tools.html#cb1-27" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Open the new file for writing</span></span>
<span id="cb1-28"><a href="/notes/VICE and Voyant Tools.html#cb1-28" aria-hidden="true" tabindex="-1"></a>                <span class="cf">with</span> <span class="bu">open</span>(new_file_path, <span class="st">&#39;w&#39;</span>) <span class="im">as</span> new_file:</span>
<span id="cb1-29"><a href="/notes/VICE and Voyant Tools.html#cb1-29" aria-hidden="true" tabindex="-1"></a>                    <span class="co"># Write the matching content to the new file and remove license stuff</span></span>
<span id="cb1-30"><a href="/notes/VICE and Voyant Tools.html#cb1-30" aria-hidden="true" tabindex="-1"></a>                    comments <span class="op">=</span> re.sub(<span class="vs">r&quot; \*? {1,2}This [VICE|file|library|program][\s\S]*(USA|licenses\/&gt;)\.?&quot;</span>, <span class="st">&#39;&#39;</span>, <span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>.join(matches))</span>
<span id="cb1-31"><a href="/notes/VICE and Voyant Tools.html#cb1-31" aria-hidden="true" tabindex="-1"></a>                    new_file.write(comments)</span>
<span id="cb1-32"><a href="/notes/VICE and Voyant Tools.html#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="/notes/VICE and Voyant Tools.html#cb1-33" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(<span class="ss">f&quot;Matches found in </span><span class="sc">{</span>filename<span class="sc">}</span><span class="ss">. Copied to </span><span class="sc">{</span>new_filename<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb1-34"><a href="/notes/VICE and Voyant Tools.html#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="/notes/VICE and Voyant Tools.html#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify the folder path and regex pattern</span></span>
<span id="cb1-36"><a href="/notes/VICE and Voyant Tools.html#cb1-36" aria-hidden="true" tabindex="-1"></a>folder_path <span class="op">=</span> <span class="st">&#39;files/&#39;</span></span>
<span id="cb1-37"><a href="/notes/VICE and Voyant Tools.html#cb1-37" aria-hidden="true" tabindex="-1"></a>regex_pattern <span class="op">=</span> re.<span class="bu">compile</span>(<span class="vs">r&#39;/\*(.*?)\*/&#39;</span>, re.DOTALL)</span>
<span id="cb1-38"><a href="/notes/VICE and Voyant Tools.html#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="/notes/VICE and Voyant Tools.html#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Call the function to search and copy files</span></span>
<span id="cb1-40"><a href="/notes/VICE and Voyant Tools.html#cb1-40" aria-hidden="true" tabindex="-1"></a>search_and_copy_files(folder_path, regex_pattern)</span></code></pre></div>
        <p>I already had the regex pattern in place. After the clean-up,
        I loaded everything into a new corpus and started to play a bit.
        It indicates that I don’t have much experience with text mining,
        but at least it already seemed more meaningful. This new corpus,
        based just on the comment, will be the starting point for a
        later exploration.</p>
        <h2 id="section-2">2023-05-24</h2>
        <p>I worked on the python script to also remove the licence from
        the text files. Since they have been present in every document,
        they clogged up Voyant Tools with their presence. The script
        block in the former log entry is updated accordingly. Spinning
        up Voyant with this cleaned up corpus feels at least like a
        proper text.</p>
        <p>Not advancing with reading the corpus through Voyant Tools.
        The comments are heavily segmented and include plenty of
        technical terms. Often the comments are brief and referential,
        respectively, again coded. Examples include what type a function
        is – peek, open, init, close, store, read, reset, and my
        favourite the “NO poke function”.</p>
        <p><strong>What style and what intent drives a comment?</strong>
        Of course brevity and precision, but many comments wouldn’t fit
        one or the other. Some comments indicate what should happen, or
        comment the process along the lines of code.</p>
        <blockquote>
        <p>detect 35..42 track d64 image, determine image parameters.
        Walk from 35 to 42, calculate expected image file size for each
        track, and compare this with the size of the given image. start
        at track 35 check if image matches “checkimage_tracks” image
        file matches size-with-no-error-info image file matches
        size-with-error-info try next track (all tracks from 35 to 42
        have 17 blocks) we tried them all up to 42, none worked, image
        must be corrupt</p>
        </blockquote>
        <p>Then again, other comments tell little stories.</p>
        <blockquote>
        <p>HACK: if the image has an error map, and the “FDC” did not
        detect an error in the GCR stream, use the error from the error
        map instead. FIXME: what should really be done is encoding the
        errors from the error map into the GCR stream. this is a lot
        more effort and will give the exact same results, so i will
        leave it to someone else :)</p>
        </blockquote>
        <p>There are also strong indications that different authors
        follow different comment styles and approaches.</p>
        <p>Maybe I’ll research around VICE next to get a better picture.
        Since critical code analysis is an interpretative method, it
        “requires reading an object in its (post)human context through a
        particular critical lens.” (Marino, 2012, p. 15) Community,
        history, but also the embeded values and frame of reference will
        be important.</p>
    </main>

    <footer class="text-sm">
        <p class="flex">
        </p>
        <p>All content, where not noted otherwise on <a href="https://dissertation.thgie.ch">dissertation.thgie.ch</a> is released and distributed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">CC-BY-SA 4.0 license</a>.</p>
    </footer>

    <script>

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('p').forEach(el => {
                if(el.querySelectorAll('img').length > 1) {
                    el.classList.add('gallery')
                }
            })
        })

    </script>
</body>
</html>
